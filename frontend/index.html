<!DOCTYPE html>
<html>

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src='/jquery.min.js'></script>
  <script src='/masonry.pkgd.js'></script>
  <script src='/imagesloaded.pkgd.js'></script>
</head>

  <style>
  .grid {
    background: #DDD;
  }

  .grid:after {
    content: '';
    display: block;
    clear: both;
  }

  .grid-sizer,
  .grid-item {
    width: 20%;
  }

  .grid-item {
    float: left;
  }

  .grid-item img {
    display: block;
    max-width: 100%;
  }

  img {
    border: solid 2px white;
  }
  </style>
<body>

  <div id="grid" class="grid">
    <div class="grid-sizer"></div>
  </div>

  <script>
    var grid = document.querySelector('.grid');
    var msnry = new Masonry( grid, {
      itemSelector: '.grid-item',
      columnWidth: '.grid-sizer',
      percentPosition: true
    });

    imagesLoaded(grid).on('progress', function() {
      msnry.layout();
    });

    function createImageElement(imageUrl) {
      var element = document.createElement('div');
      var image = document.createElement('img');
      image.src = imageUrl;
      element.className = 'grid-item';
      element.appendChild(image);
      return element;
    }

    function removeAllImages() {
      var gridElement = document.getElementById("grid");
      while (gridElement.firstChild) {
          gridElement.removeChild(gridElement.firstChild);
      }
    }

    $.getJSON("http://dashboard-backend.dev.topmonks.com/photos", function(result){
      var elements = [];
      var fragment = document.createDocumentFragment();

      result.forEach(function(item){
        var imageUrl = item.image;
        var element = createImageElement(imageUrl);
        fragment.appendChild(element);
        elements.push(element);
      });

      grid.appendChild(fragment);
      msnry.appended(elements);
    });

    window.setTimeout(function(){
      location.reload();
    }, 300000);

  </script>
</body>
</html>
